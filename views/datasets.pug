extends layout

block content
    each set, i in datasets
        .row.my-3
            .col
                .card.border-light.shadow-rb
                    .card-header
                        .card-title.m-0.d-flex.content-justify-between
                            h4.text-shadow
                                a(href="/set/" + set._id)= set.name
                            button.ml-auto.btn.btn-primary.btn-shadow
                                span.fas.fa-edit
                    .card-body(style="position: relative; height: 300px;")
                        .chartcontainer(style="height: 300px" id="set-" + i + "-" + set._id data-setid=set._id)

//- .card.border-light
//-     .card-header hi there
//-     .card-body
//-         h4.card-title inner title
//-         p.card-text lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum 



                //- .container.rounded-2.bg-level-2.shadow-rb
                //-     .row
                //-         .col
                //-             h5
                //-                 a(href="/set/" + set._id)= set.name
                //-                 a(href="#") 
                //-                     span.fas.fa-edit
                //-     .row
                //-         .col(style="height: 300px")
                //-             div(class="chartcontainer" id="set-" + i + "-" + set._id data-setid=set._id)

block pagescript
    script.

        $(".chartcontainer").each(function(i, container) {
            var setid = container.dataset.setid;
            var controller = new ChartController(container);
            controller.colorOffset = i;
            controller.addDataset(setid);
        });

        //- $.ajax({
        //-     url: '/api/sets',
        //-     method: 'GET',
        //-     success: (datasets) => {
        //-         console.log(datasets);
        //-         for(var i = 0; i < datasets.length; i++) {
        //-             var set = datasets[i];
        //-             var containerid = "set-" + i + "-" + set._id;
        //-             console.log(containerid)
        //-             var controller = new ChartController($("#" + containerid)[0]);
        //-             controller.colorOffset = i;
        //-             controller.addDataset(set._id);
        //-         }
        //-     },
        //-     error: (err) => {
        //-         console.log(err);

        //-         if (complete) complete();
        //-     }
        //- });
